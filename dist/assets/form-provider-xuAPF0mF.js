import{u as Q,j as v,a8 as U,bd as X,v as b,I as S,ae as Y,O as Z,G as x,B as _}from"./index-DR0FuGqf.js";import{T as q,e as W}from"./index.esm-BWDhU9ac.js";function ue({sx:n,...a}){const s=Q();return v.jsx(U,{component:"div",sx:{p:0,top:0,right:0,width:1,height:1,zIndex:9,opacity:0,position:"absolute",color:"common.white",borderRadius:"inherit",transition:s.transitions.create(["opacity"]),"&:hover":{...X({color:b(s.vars.palette.grey["900Channel"],.64)}),opacity:1},...n},...a,children:v.jsx(S,{icon:"eva:arrow-circle-down-fill",width:24})})}function fe({sx:n,...a}){return v.jsx(Y,{size:"small",sx:{p:.35,top:4,right:4,position:"absolute",color:"common.white",bgcolor:s=>b(s.vars.palette.grey["900Channel"],.48),"&:hover":{bgcolor:s=>b(s.vars.palette.grey["900Channel"],.72)},...n},...a,children:v.jsx(S,{icon:"mingcute:close-line",width:12})})}const ee=Z(q)`
  input {
    text-align: center;
  }
`,te={TextFieldStyled:ee},ne=n=>v.jsx(te.TextFieldStyled,{...n}),F={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function re(n,a){return n<=0?[]:Array.from({length:n},a)}function ae(n,a,s){return n.map((i,D)=>a===D?s:i)}function N(n){return n.join("")}function O(n,a){return[...n,a]}function oe(n,a,s){return n.reduce((i,D,c)=>{const{characters:y,restArrayMerged:u}=i;if(c<s)return{restArrayMerged:u,characters:O(y,D)};const[B,...j]=u;return{restArrayMerged:j,characters:O(y,B||"")}},{restArrayMerged:a,characters:[]}).characters}function se(n){return n.split("")}function P(n){const a=x.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return x.useInsertionEffect(()=>{a.current=n}),x.useCallback((...s)=>{var i;return(i=a.current)==null?void 0:i.call(a,...s)},[])}const le=()=>!0,pe=x.forwardRef((n,a)=>{const{value:s="",length:i=4,autoFocus:D=!1,onChange:c,TextFieldsProps:y,onComplete:u,validateChar:B=le,className:j,onBlur:I,...$}=n,K=x.useRef(s),C=P(u),R=P(e=>{const t=e.slice(0,i);return{isCompleted:t.length===i,finalValue:t}});x.useEffect(()=>{const{isCompleted:e,finalValue:t}=R(K.current);e&&C(t)},[i,C,R]);const d=re(i,(e,t)=>({character:s[t]||"",inputRef:x.createRef()})),T=e=>d.findIndex(({inputRef:t})=>t.current===e),A=()=>d.map(({character:e})=>e),V=(e,t)=>{const r=ae(A(),e,t);return N(r)},z=e=>{var t,r;(r=(t=d[e])==null?void 0:t.inputRef.current)==null||r.focus()},p=e=>{var t,r;(r=(t=d[e])==null?void 0:t.inputRef.current)==null||r.select()},M=e=>{e+1!==i&&(d[e+1].character?p(e+1):z(e+1))},E=(e,t)=>typeof B!="function"?!0:B(e,t),G=e=>{const t=T(e.target);if(t===0&&e.target.value.length>1){const{finalValue:m,isCompleted:w}=R(e.target.value);c==null||c(m),w&&(u==null||u(m)),p(m.length-1);return}const r=e.target.value[0]||"";let f=r;f&&!E(f,t)&&(f="");const o=V(t,f);c==null||c(o);const{isCompleted:g,finalValue:h}=R(o);g&&(u==null||u(h)),f!==""?o.length-1<t?p(o.length):M(t):r===""&&o.length<=t&&p(t-1)},H=e=>{const t=e.target,r=t.selectionStart,f=t.selectionEnd,o=T(t),g=r===0&&f===0;if(t.value===e.key)e.preventDefault(),M(o);else if(F.backspace===e.key){if(!t.value)e.preventDefault(),p(o-1);else if(g){e.preventDefault();const h=V(o,"");c==null||c(h),h.length<=o&&p(o-1)}}else F.left===e.key?(e.preventDefault(),p(o-1)):F.right===e.key?(e.preventDefault(),p(o+1)):F.home===e.key?(e.preventDefault(),p(0)):F.end===e.key&&(e.preventDefault(),p(d.length-1))},L=e=>{const t=e.clipboardData.getData("text/plain"),r=e.target,f=d.findIndex(({character:l,inputRef:k})=>l===""||k.current===r),o=A(),g=oe(o,se(t),f).map((l,k)=>E(l,k)?l:""),h=N(g);c==null||c(h);const{isCompleted:m,finalValue:w}=R(h);m?(u==null||u(w),p(i-1)):p(h.length)},J=e=>{if(!d.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:r}=R(s);I==null||I(r,t)}};return v.jsx(_,{display:"flex",gap:"20px",alignItems:"center",ref:a,className:`MuiOtpInput-Box ${j||""}`,...$,children:d.map(({character:e,inputRef:t},r)=>{const{onPaste:f,onFocus:o,onKeyDown:g,className:h,onBlur:m,...w}=typeof y=="function"?y(r)||{}:y||{};return v.jsx(ne,{autoFocus:D?r===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${r+1} ${h||""}`,onPaste:l=>{l.preventDefault(),L(l),f==null||f(l)},onFocus:l=>{l.preventDefault(),l.target.select(),o==null||o(l)},onChange:G,onKeyDown:l=>{H(l),g==null||g(l)},onBlur:l=>{m==null||m(l),J(l)},...w},r)})})});function he({children:n,onSubmit:a,methods:s}){return v.jsx(W,{...s,children:v.jsx("form",{onSubmit:a,noValidate:!0,autoComplete:"off",children:n})})}export{ue as D,he as F,fe as R,pe as o};
