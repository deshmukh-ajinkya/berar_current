import{j as e,B as m,h as d,R as h,I as g,k as j,n as y,o as b,p as c,A as F,H as v,C as R}from"./index-DNHu7RGK.js";import{z as l,t as I,L as C}from"./InputAdornment-B_onsycV.js";import{u as V}from"./index.esm-DCntjuy8.js";import{E as k}from"./new-password-icon-D_Wgvdxb.js";import{F as w}from"./fields-ZUyXaCLq.js";import{F as S}from"./form-provider-DxarZtQT.js";import"./image-DAMasBwt.js";import{F as E}from"./form-head-Cu56Nv6g.js";import"./isMuiElement-DTWpIFOv.js";import"./formControlState-Dq1zat_P.js";import"./RadioGroup-0gtt6-D2.js";function L({value:o,disabled:t,onResendCode:r,sx:s,...i}){return e.jsxs(m,{sx:{mt:3,typography:"body2",alignSelf:"center",...s},...i,children:["Donâ€™t have a code? ",e.jsxs(d,{variant:"subtitle2",onClick:r,sx:{cursor:"pointer",...t&&{color:"text.disabled",pointerEvents:"none"}},children:["Resend ",t&&o&&o>0&&`(${o}s)`]})]})}function P({sx:o,href:t,children:r,label:s,icon:i,...n}){return e.jsxs(d,{component:h,href:t,color:"inherit",variant:"subtitle2",sx:{mt:3,gap:.5,mx:"auto",alignItems:"center",display:"inline-flex",...o},...n,children:[i||e.jsx(g,{width:16,icon:"eva:arrow-ios-back-fill"}),s||"Return to sign in"]})}const A=l.object({code:l.string().min(6,{message:"Code must be at least 6 characters!"})});function B(){var a;const o=j(),{checkUserSession:t}=y(),r=V({resolver:I(A),defaultValues:{code:""}}),{handleSubmit:s,formState:{isSubmitting:i,errors:n},setError:u}=r,f=s(async({code:p})=>{const x=sessionStorage.getItem("username");try{await b({username:x,otp:p}),await(t==null?void 0:t()),o.push(c.dashboard.root)}catch{u("code",{message:"OTP verification failed. Please try again."})}});return e.jsxs(e.Fragment,{children:[e.jsx(E,{icon:e.jsx(k,{}),title:"Please check your mobile number!",description:`We've sent a 6-digit confirmation code to your mobile or landline.
Please enter the code below to verify.`}),e.jsx(S,{methods:r,onSubmit:f,children:e.jsxs(m,{gap:3,display:"flex",flexDirection:"column",children:[((a=n.code)==null?void 0:a.message)&&e.jsx(F,{severity:"error",children:n.code.message}),e.jsx(w.Code,{name:"code"}),e.jsx(C,{fullWidth:!0,size:"large",type:"submit",variant:"contained",loading:i,loadingIndicator:"Verifying...",children:"Verify & Redirect to Dashboard"})]})}),e.jsx(L,{onResendCode:()=>{},value:0,disabled:!1}),e.jsx(P,{href:c.auth.signIn})]})}const D={title:`Verify otp | ${R.appName}`};function Q(){return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsxs("title",{children:[" ",D.title]})}),e.jsx(B,{})]})}export{Q as default};
